<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>福岡 2/28 - 3/8 深度探險行程</title>
    <!-- 引入 Google Fonts 與 Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #2c3e50; /* 深藍質感 */
            --accent-color: #d35400; /* 活力橘 */
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --timeline-color: #bdc3c7;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-color);
            color: #333;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            padding: 40px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header h1 {
            margin: 0;
            font-size: 2rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            margin-top: 10px;
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Container */
        .container {
            max-width: 800px;
            margin: -30px auto 40px;
            padding: 0 15px;
            position: relative;
            z-index: 2;
        }

        /* Day Section & Collapse Logic */
        .day-section {
            margin-bottom: 20px; /* 調整間距 */
            border-radius: 12px;
            overflow: hidden; /* 確保圓角 */
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            background-color: var(--bg-color);
        }

        .day-header {
            background: var(--primary-color);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer; /* 滑鼠變手指 */
            user-select: none; /* 防止雙擊選取文字 */
            transition: background-color 0.3s;
        }

        .day-header:hover {
            background-color: #34495e; /*稍微變亮*/
        }

        .header-info {
            display: flex;
            flex-direction: column;
        }

        .day-title {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .day-date {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* 旋轉箭頭 */
        .toggle-icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        /* 收合時的狀態 */
        .day-section.collapsed .toggle-icon {
            transform: rotate(-90deg); /* 箭頭向左 */
        }

        .day-section.collapsed .timeline {
            display: none; /* 隱藏內容 */
        }
        
        /* 為了讓sticky效果在收合時不怪異，我們移除原本的 sticky 效果，
           或者保留它但要注意收合後的行為。這裡為了收合體驗流暢，先移除 sticky */
        /*
        .day-header {
            position: sticky;
            top: 0;
            z-index: 10;
        }
        */

        /* Timeline & Cards */
        .timeline {
            background: var(--card-bg);
            padding: 20px;
            position: relative;
            /* 動畫過渡效果有點複雜，這裡用簡單的 display none 切換 */
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 30px;
            top: 20px;
            bottom: 20px;
            width: 2px;
            background: var(--timeline-color);
        }

        .spot-card {
            position: relative;
            margin-bottom: 30px;
            padding-left: 45px;
        }

        .spot-marker {
            position: absolute;
            left: 21px;
            top: 0;
            width: 20px;
            height: 20px;
            background: var(--accent-color);
            border: 3px solid white;
            border-radius: 50%;
            box-shadow: 0 0 0 2px var(--accent-color);
            z-index: 1;
        }

        .spot-content {
            background: #fff;
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s;
        }

        .spot-content:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .spot-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background-color: #eee;
        }

        .spot-details {
            padding: 15px;
        }

        .spot-name {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tags span {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 5px;
            font-weight: normal;
            vertical-align: middle;
        }

        .tag-outdoor { background-color: #27ae60; color: white; }
        .tag-shop { background-color: #e67e22; color: white; }
        .tag-food { background-color: #e74c3c; color: white; }
        .tag-culture { background-color: #8e44ad; color: white; }

        .spot-info {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 10px;
            background: #f9f9f9;
            padding: 8px;
            border-radius: 6px;
        }

        .spot-info i {
            width: 20px;
            text-align: center;
            color: var(--accent-color);
        }

        .spot-desc {
            font-size: 0.9rem;
            color: #444;
            margin-bottom: 15px;
        }

        .btn-map {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 0.8rem;
            transition: background 0.3s;
        }

        .btn-map:hover {
            background-color: #2980b9;
        }

        .warning-text {
            color: #c0392b;
            font-weight: bold;
            font-size: 0.9em;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.8rem;
        }

        @media (max-width: 600px) {
            .timeline::before { left: 20px; }
            .spot-card { padding-left: 35px; }
            .spot-marker { left: 11px; }
            header h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

<header>
    <h1>福岡 8+1 日深度探險</h1>
    <p>2/28 - 3/8 • 大眾交通 • 深度漫遊</p>
    <p style="font-size: 0.8rem; margin-top: 5px;">(點擊日期可收合行程)</p>
</header>

<div class="container" id="itinerary-container">
    <!-- 內容將由 JavaScript 動態生成 -->
</div>

<footer>
    <p>Have a nice trip to Fukuoka!</p>
</footer>

<script>
    /**
     * ============================================================
     * 使用者設定區 (USER CONFIGURATION)
     * 請在此處填入您查詢到的經緯度。
     * 格式：lat: 緯度, lng: 經度
     * 如果不填 (null)，地圖按鈕會自動切換為「文字搜尋」模式。
     * ============================================================
     */
    const locationData = {
        // Day 1
        "fuk_airport": { lat: null, lng: null }, // 福岡機場
        "pancake": { lat: null, lng: null },     // 幸福pancake
        "lalaport": { lat: null, lng: null },    // LaLaport
        "canal_city": { lat: null, lng: null },  // 博多運河城
        "bayside": { lat: null, lng: null },     // 博多灣岸廣場
        
        // Day 2
        "kokura_castle": { lat: null, lng: null }, // 小倉城
        "tanga_market": { lat: null, lng: null },  // 旦過市場
        "mojiko": { lat: null, lng: null },        // 門司港懷舊區
        "sarakurayama": { lat: null, lng: null },  // 皿倉山展望台

        // Day 3
        "tenjin_under": { lat: null, lng: null },  // 天神地下街
        "yoshizuka": { lat: null, lng: null },     // 吉塚鰻魚屋
        "ohori_park": { lat: null, lng: null },    // 大濠公園
        "fukuoka_tower": { lat: null, lng: null }, // 福岡塔
        "momochi": { lat: null, lng: null },       // 百道海濱公園

        // Day 4
        "marinoa": { lat: null, lng: null },       // Marinoa City Outlet

        // Day 5
        "dazaifu": { lat: null, lng: null },       // 太宰府天滿宮
        "nanzoin": { lat: null, lng: null },       // 南藏院

        // Day 6
        "yufuin_station": { lat: null, lng: null }, // 由布院車站
        "yunotsubo": { lat: null, lng: null },      // 湯之坪街道
        "kinrin_lake": { lat: null, lng: null },    // 金鱗湖 (傍晚/夜間)

        // Day 7 (由布院 Day 2)
        "kinrin_morning": { lat: null, lng: null }, // 金鱗湖晨霧
        "floral_village": { lat: null, lng: null }, // 湯布院童話村
        "comico_art": { lat: null, lng: null },     // COMICO ART MUSEUM
        "mt_yufu_view": { lat: null, lng: null },   // 由布岳登山口/觀景點

        // Day 8
        "kushida": { lat: null, lng: null },        // 櫛田神社
        "bread_espresso": { lat: null, lng: null }, // BREAD, ESPRESSO
        "kawabata": { lat: null, lng: null },       // 川端通商店街
        "river_cruise": { lat: null, lng: null },   // 那珂川水上巴士
        "nakasu_yatai": { lat: null, lng: null },   // 中洲屋台

        // Day 9
        "hakata_station": { lat: null, lng: null }  // 博多車站
    };

    /**
     * 行程資料結構
     */
    const itinerary = [
        {
            day: 1,
            date: "2/28 (週六)",
            title: "抵達福岡 & 博多市區",
            spots: [
                {
                    id: "fuk_airport",
                    name: "抵達福岡機場 (FUK)",
                    tag: "交通",
                    tagClass: "tag-culture",
                    img: "https://bobbyfun.tw/wp-content/uploads/2025/09/20250912173610_0_e59644.jpg",
                    info: "11:15 抵達 | 轉乘免費接駁巴士至國內線搭地鐵",
                    desc: "抵達後，搭乘接駁車前往國內線航廈，轉乘地鐵空港線只需5分鐘即可抵達博多市區。"
                },
                {
                    id: "pancake",
                    name: "幸福pancake 福岡天神店",
                    tag: "美食",
                    tagClass: "tag-food",
                    img: "https://dorapig.com/wp-content/uploads/20231009230033_17.jpg",
                    info: "10:30 - 19:30 | 天神站2號出口",
                    desc: "知名的舒芙蕾鬆餅，建議先去抽號碼牌或預約，口感如雲朵般鬆軟。"
                },
                {
                    id: "lalaport",
                    name: "福岡 LaLaport",
                    tag: "購物",
                    tagClass: "tag-shop",
                    img: "https://d1grca2t3zpuug.cloudfront.net/2023/12/lalaport_fukuoka_01.jpg",
                    info: "10:00 - 21:00 | 1:1 鋼彈立像",
                    desc: "博多巴士總站搭乘 44/45 號公車直達。除了購物，戶外的巨型鋼彈是必拍地標。"
                },
                {
                    id: "canal_city",
                    name: "博多運河城",
                    tag: "購物",
                    tagClass: "tag-shop",
                    img: "https://assets.funliday.com/posts/wp-content/uploads/2024/12/02162019/Snapinsta.app_415939155_879937227472084_2068015520542221285_n_1080-1.jpg",
                    info: "10:00 - 21:00 | 定時水舞秀",
                    desc: "結合運河的複合式商場。可從博多車站步行或搭乘百元巴士前往。"
                },
                {
                    id: "bayside",
                    name: "博多灣岸廣場",
                    tag: "景點",
                    tagClass: "tag-outdoor",
                    img: "https://www.crossroadfukuoka.jp/storage/tourism_attractions/16776/responsive_images/CzKQap5WsDjLkPMwyNzkE81ADkqsWn7f1AeXUs9G__1673_1115.jpg",
                    info: "17:00 - 24:00",
                    desc: "包含博多港塔（免費入場）與水族館，夜晚港口景色迷人。"
                }
            ]
        },
        {
            day: 2,
            date: "3/1 (週日)",
            title: "北九州一日遊",
            spots: [
                {
                    id: "kokura_castle",
                    name: "小倉城",
                    tag: "戶外",
                    tagClass: "tag-outdoor",
                    img: "https://www.crossroadfukuoka.jp/storage/tourism_attractions/13192/responsive_images/6a89Qz9mpETbwLfdhiJa8qiGel8jrjU4G9hNvSYz__1570_1047.jpg",
                    info: "09:00 - 18:00 | 門票 350円",
                    desc: "搭乘 JR特急音速號至小倉站。這是北九州的象徵，天守閣內有互動展覽。"
                },
                {
                    id: "tanga_market",
                    name: "旦過市場",
                    tag: "美食",
                    tagClass: "tag-food",
                    img: "https://www.crossroadfukuoka.jp/storage/tourism_attractions/13182/responsive_images/AMSmSohKjcTx6kbho7t7uly1QDjzU1EoYzSEndsQ__1680_1007.jpg",
                    info: "10:00 - 18:00 | 北九州的廚房",
                    desc: "從小倉城步行約10分鐘。必吃魚板、大學芋等在地小吃（留意週日部分店休）。"
                },
                {
                    id: "mojiko",
                    name: "門司港懷舊區",
                    tag: "戶外",
                    tagClass: "tag-outdoor",
                    img: "https://www.crossroadfukuoka.jp/storage/tourism_attractions/10619/responsive_images/PPasJtMun4JX3iIvXs3nuFk92d8Ak3eL4m7tWT9T__1658_1105.jpg",
                    info: "24H 開放 | 歐式建築群",
                    desc: "JR 門司港站下車。充滿大正浪漫風情，必吃燒咖哩，可散步至關門海峽看海。"
                },
                {
                    id: "sarakurayama",
                    name: "皿倉山展望台",
                    tag: "夜景",
                    tagClass: "tag-outdoor",
                    img: "https://static.gltjp.com/glt/data/directory/13000/12873/20220223_105017_deba3c1d_w1920.webp",
                    info: "纜車往返 1230円 | 新日本三大夜景",
                    desc: `JR 八幡站轉乘免費接駁車（週末運行）。<span class='warning-text'>平日需搭計程車至纜車站。</span>視野極佳，可俯瞰整個北九州。
回博多路線詳情 (總共 48 分鐘)<br/>​第一段\：區間車<br/>​起點\： 八幡 (福岡) <br/>
​列車\： 鹿兒島本線 (普通車) <br/>​發車時間\： 21:16<br/>​抵達： 黑崎 <br/>​抵達時間\： 21:19 <br/>​行經\： 1 站 (3 分鐘) <br/>
​轉乘 <br/>​方式\： 步行約 2 分鐘 <br/>​第二段\：特急列車 <br/>起點： 黑崎 <br/>​列車\： JR 音速・日輪・日向 (特急) <br/>​發車時間\： 21:24 <br/>​終點： 博多 <br/>​預計抵達時間\： 22:04 <br/>​行經\： 4 站 (40 分鐘) <br/>​這趟行程的票價約為 ¥2,430，全程耗時 48 分鐘。`
                }
            ]
        },
        {
            day: 3,
            date: "3/2 (週一)",
            title: "天神、公園與夜景",
            spots: [
                {
                    id: "tenjin_under",
                    name: "天神地下街",
                    tag: "購物",
                    tagClass: "tag-shop",
                    img: "https://d1grca2t3zpuug.cloudfront.net/2024/04/phga-location-top-870x500.webp",
                    info: "10:00 - 20:00 | 歐風設計",
                    desc: "全長約600米，連接地鐵天神站與天神南站，適合雨天備案或躲避豔陽。"
                },
                {
                    id: "yoshizuka",
                    name: "博多名代 吉塚鰻魚屋",
                    tag: "美食",
                    tagClass: "tag-food",
                    img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRuYmsmOy0xM9zN1Vk9j4Uvg1aqdWiQf3rOgA&s",
                    info: "10:30 - 21:00 | 百年老店",
                    desc: "福岡最知名的鰻魚飯，建議避開尖峰時段或提早排隊。鰻魚烤得外酥內嫩。"
                },
                {
                    id: "ohori_park",
                    name: "大濠公園",
                    tag: "戶外",
                    tagClass: "tag-outdoor",
                    img: "https://www.ohorikouen.jp/img/lng/island.jpg",
                    info: "全天開放 | 湖畔散步",
                    desc: "福岡市民的綠洲，湖中有小島以橋相連，非常適合午後散步或踩天鵝船。"
                },
                {
                    id: "fukuoka_tower",
                    name: "福岡塔",
                    tag: "景點",
                    tagClass: "tag-outdoor",
                    img: "https://www.crossroadfukuoka.jp/storage/tourism_attractions/12343/responsive_images/Xe2DsFgtzeQmkTADNBhziwV6MfGNB2Ck99CIEP8g__1690_1125.jpg",
                    info: "09:30 - 22:00 | 外國人優惠 640円",
                    desc: "日本最高的海濱塔，鏡面外觀在夕陽下非常美麗。建議黃昏時前往。"
                },
                {
                    id: "momochi",
                    name: "百道海濱公園",
                    tag: "戶外",
                    tagClass: "tag-outdoor",
                    img: "https://www.fukuokatower.co.jp/files/bgeditor/img/132__c2Vhc2lkZW1vbW9jaGktMDE-d-.jpg",
                    info: "福岡塔正前方 | 人造沙灘",
                    desc: "充滿異國風情的海濱區域，有歐式結婚禮堂，是看海與拍攝福岡塔全景的最佳位置。"
                }
            ]
        },
        {
            day: 4,
            date: "3/3 (週二)",
            title: "Outlet 購物日",
            spots: [
                {
                    id: "marinoa",
                    name: "Marinoa City Fukuoka",
                    tag: "購物",
                    tagClass: "tag-shop",
                    img: "https://japantravel.co/wp-content/uploads/2024/08/marinoa-city-fukuoka-daytime-2.jpg",
                    info: "10:00 - 20:00 | 海濱Outlet",
                    desc: "天神搭乘 333 號巴士直達。九州規模最大的 Outlet 之一，有摩天輪與大量運動品牌。"
                }
            ]
        },
        {
            day: 5,
            date: "3/4 (週三)",
            title: "宗教與文化巡禮",
            spots: [
                {
                    id: "dazaifu",
                    name: "太宰府天滿宮",
                    tag: "文化",
                    tagClass: "tag-culture",
                    img: "https://images.ctfassets.net/zk4rsh4y8c7i/378k5bVGsV8QGQwf7CoBjb/0c82d7cbda91012ebdfeed457973239a/img_og_dazaifu_tcn.jpg?q=30",
                    info: "06:30 - 19:00 | 表參道梅枝餅",
                    desc: "搭乘西鐵旅人號前往。供奉學問之神，參道上有星巴克概念店與必吃梅枝餅。"
                },
                {
                    id: "nanzoin",
                    name: "南藏院",
                    tag: "文化",
                    tagClass: "tag-culture",
                    img: "https://peikie.com/wp-content/uploads/IMG_2834.jpeg",
                    info: "09:00 - 16:30 | 世界最大青銅臥佛",
                    desc: "JR 城戶南藏院前站下車。氣氛莊嚴，擁有震撼的巨大臥佛。請注意穿著與保持安靜。"
                }
            ]
        },
        {
            day: 6,
            date: "3/5 (週四)",
            title: "前進大分 - 湯布院散策",
            spots: [
                {
                    id: "yufuin_station",
                    name: "由布院 (Yufuin)",
                    tag: "交通",
                    tagClass: "tag-outdoor",
                    img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgfENkvdMq_GuBvhxuWFrG92b0Uf-10Nfxd12SJczBi5OHyyTbwySccfOQcVovpxm1rg5DaUVvwreUpW4Iiyof0yDwZ3knDaqBlEAplmiOb1qMeGTYye-Fp6ghQxKUu8-5P-MlYLP2BYNFx/s1600-rw/Kyushu-Yufuin-IMG_4766.JPG",
                    info: "高速巴士約 1h40m",
                    desc: "建議從博多巴士總站搭乘高速巴士直達（需預約），比 JR 更方便。車站建築由磯崎新設計，非常有特色。"
                },
                {
                    id: "yunotsubo",
                    name: "湯之坪街道",
                    tag: "購物",
                    tagClass: "tag-shop",
                    img: "https://s3-ap-northeast-1.amazonaws.com/thegate/2021/02/02/13/38/03/Yunotsubo-Kaido.jpg",
                    info: "10:00 - 17:00 | 甜點激戰區",
                    desc: "B-Speak 蛋糕捲、史努比茶屋、米飛兔麵包店都在這條街上。邊吃邊逛前往金鱗湖。"
                },
                {
                    id: "kinrin_lake",
                    name: "金鱗湖 (夕陽/夜間)",
                    tag: "戶外",
                    tagClass: "tag-outdoor",
                    img: "https://tw.wamazing.com/media/wp-content/uploads/sites/4/2024/06/kinrinko_pixta_73475123_M.jpg.webp",
                    info: "全天開放 | 湖中鳥居",
                    desc: "第一天抵達可先欣賞午後或傍晚的金鱗湖，湖水由溫泉與清水混合，氣溫低時湖面會飄起煙霧。"
                }
            ]
        },
        {
            day: 7,
            date: "3/6 (週五)",
            title: "由布院深度慢活 & 返回博多",
            spots: [
                {
                    id: "kinrin_morning",
                    name: "金鱗湖晨霧",
                    tag: "戶外",
                    tagClass: "tag-outdoor",
                    img: "https://oreo.blog/wp-content/uploads/20180722181710_58.jpg",
                    info: "推薦時段: 07:00 - 08:30",
                    desc: "住在由布院的特權！清晨氣溫低，湖面會籠罩在夢幻的白色晨霧中，景色與白天截然不同，是攝影愛好者的最愛。"
                },
                {
                    id: "floral_village",
                    name: "湯布院花卉村",
                    tag: "景點",
                    tagClass: "tag-shop",
                    img: "https://res.klook.com/image/upload/c_crop,h_920,w_1472,x_70,y_0,z_0.4/w_750,h_469,c_fill,q_85/w_80,x_15,y_15,g_south_west,l_Klook_water_br_trans_yhcmh3/activities/or1zxme8kbtlh7fy4gxg.jpg",
                    info: "09:30 - 17:30 | 歐式童話村",
                    desc: "彷彿走進哈利波特或宮崎駿的世界，充滿英式科茨沃爾德風格的黃色小屋，內有許多貓頭鷹、松鼠等小動物區。"
                },
                {
                    id: "comico_art",
                    name: "由布院史奴比茶屋",
                    tag: "購物",
                    tagClass: "tag-culture",
                    img: "https://cc.tvbs.com.tw/img/program/upload/2024/01/15/20240115170938-5834497d.jpg",
                    info: "大買紀念品",
                    desc: "滿滿史努比由布院限定品，無敵萌的，還有史努比造型甜點～3間由布院史努比就在隔壁、對面"
                },
                {
                    id: "mt_yufu_view",
                    name: "由布岳 & 漫遊",
                    tag: "戶外",
                    tagClass: "tag-outdoor",
                    img: "https://i0.wp.com/alleychen.com/wp-content/uploads/2024/09/image-26.png?resize=935%2C658&ssl=1",
                    info: "慢活散策",
                    desc: "下午避開湯之坪主要人潮，往由布岳方向散步，找間視野好的咖啡廳休息。隨後搭乘<span class='warning-text'>傍晚的高速巴士或 JR</span> 返回博多市區，準備明天的行程。"
                }
            ]
        },
        {
            day: 8,
            date: "3/7 (週六)",
            title: "博多舊城區 & 完美句點",
            spots: [
                {
                    id: "kushida",
                    name: "櫛田神社",
                    tag: "文化",
                    tagClass: "tag-culture",
                    img: "https://www.crossroadfukuoka.jp/storage/tourism_attractions/12510/responsive_images/4jz3eLXD7vlsC5mkI0SE8kwFzjCjK6tgsbBcPQ1Y__1673_1115.jpg",
                    info: "04:00 - 22:00 | 博多總鎮守",
                    desc: "觀賞巨大的「飾山笠」。這是博多人的信仰中心，離川端商店街非常近。"
                },
                {
                    id: "bread_espresso",
                    name: "BREAD, ESPRESSO & HAKATA &",
                    tag: "美食",
                    tagClass: "tag-food",
                    img: "https://static.popdaily.com.tw/u/202409/540e91d4-f9d2-48d2-b2d5-a3c242602aa4.png",
                    info: "08:00 - 20:00 | 網紅麵包店",
                    desc: "位於櫛田神社旁，非常適合作為早餐或下午茶，麵包口感極佳。"
                },
                {
                    id: "kawabata",
                    name: "川端通商店街",
                    tag: "購物",
                    tagClass: "tag-shop",
                    img: "https://tw.wamazing.com/media/wp-content/uploads/sites/4/2019/11/fukuokashotengai_7.jpg.webp",
                    info: "博多最古老商店街",
                    desc: "連接神社與運河城，充滿昭和風味，有許多便宜的藥妝店、豆腐店與拉麵店。"
                },
                {
                    id: "river_cruise",
                    name: "那珂川水上巴士",
                    tag: "體驗",
                    tagClass: "tag-outdoor",
                    img: "https://www.crossroadfukuoka.jp/storage/tourism_attractions/11452/responsive_images/FjDrKw18dVcXTAHLTvQB8BzqQyhLzVsBAOiFV3wg__1673_1116.jpg",
                    info: "約 18:00 - 21:00 | 船程 30min",
                    desc: "在福博であい橋搭船。夜晚乘船遊河，可以從水面上看見中洲霓虹燈與福岡塔夜景。"
                },
                {
                    id: "nakasu_yatai",
                    name: "中洲屋台",
                    tag: "美食",
                    tagClass: "tag-food",
                    img: "https://static.gltjp.com/glt/data/directory/15000/14348/20230324_204943_457f9a93_w1920.webp",
                    info: "18:00 - 24:00 | 屋台文化",
                    desc: "位於那珂川旁，雖然價格稍高，但氣氛滿點。建議點關東煮、拉麵體驗博多夜生活。"
                }
            ]
        },
        {
            day: 9,
            date: "3/8 (週日)",
            title: "歸途",
            spots: [
                {
                    id: "hakata_station",
                    name: "博多車站 & 機場",
                    tag: "交通",
                    tagClass: "tag-culture",
                    img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSTAYEWSMdwv0MGsiOKJvR5Q59KVwAV1HXwLA&s",
                    info: "12:15 起飛 | 10:15 抵達機場",
                    desc: "早上可在車站做最後伴手禮採買。<span class='warning-text'>建議 09:45 前從博多站搭地鐵前往機場</span>，並預留時間搭乘接駁車至國際線航廈。"
                }
            ]
        }
    ];

    // 收合功能函式
    function toggleDay(headerElement) {
        const section = headerElement.parentElement;
        section.classList.toggle('collapsed');
    }

    // 渲染函式
    function renderItinerary() {
        const container = document.getElementById('itinerary-container');
        let html = '';

        itinerary.forEach(day => {
            let spotsHtml = '';
            day.spots.forEach(spot => {
                // 取得座標設定
                const loc = locationData[spot.id];
                let mapLink = '';
                
                // 判斷地圖按鈕行為
                if (loc && loc.lat && loc.lng) {
                    // 有座標：開啟 Google Maps 座標
                    mapLink = `https://www.google.com/maps/search/?api=1&query=${loc.lat},${loc.lng}`;
                } else {
                    // 無座標：開啟 Google Maps 文字搜尋
                    mapLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(spot.name + " 福岡")}`;
                }

                spotsHtml += `
                    <div class="spot-card">
                        <div class="spot-marker"></div>
                        <div class="spot-content">
                            <img src="${spot.img}" alt="${spot.name}" class="spot-image" onerror="this.src='https://placehold.co/600x400/eee/999?text=Image+Not+Found'">
                            <div class="spot-details">
                                <div class="spot-name">
                                    ${spot.name}
                                    <a href="${mapLink}" target="_blank" class="btn-map">
                                        <i class="fa-solid fa-location-dot"></i> 地圖
                                    </a>
                                </div>
                                <div class="tags">
                                    <span class="${spot.tagClass}">${spot.tag}</span>
                                </div>
                                <div class="spot-info">
                                    <i class="fa-regular fa-clock"></i> ${spot.info}
                                </div>
                                <div class="spot-desc">
                                    ${spot.desc}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            // 每一天的區塊結構：增加 onclick 事件
            html += `
                <div class="day-section collapsed" id="day-${day.day}">
                    <div class="day-header" onclick="toggleDay(this)">
                        <div class="header-info">
                            <span class="day-title">Day ${day.day} - ${day.title}</span>
                            <span class="day-date">${day.date}</span>
                        </div>
                        <i class="fa-solid fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="timeline">
                        ${spotsHtml}
                    </div>
                </div>
            `;
        });

        container.innerHTML = html;
    }

    // 執行渲染
    renderItinerary();
</script>

</body>
</html>
